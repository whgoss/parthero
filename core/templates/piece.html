{% extends "base.html" %}
{% load static %}
{% load roster %}
{% block content %}
<div class="max-w-5xl mx-auto">
    <!-- Top nav / breadcrumb -->
    <div class="flex items-center justify-between gap-4 mb-2">
      <a href="{% url 'roster' %}"
         class="inline-flex items-center text-sm font-medium text-slate-500 hover:text-slate-900">
        <svg xmlns="http://www.w3.org/2000/svg"
             viewBox="0 0 20 20"
             fill="none"
             stroke="currentColor"
             class="mr-1 h-4 w-4">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6"
                d="M12.5 4.5 7 10l5.5 5.5" />
        </svg>
        Back to Pieces
      </a>
    </div>

    <!-- Basic Details -->
    <div class="grid grid-cols-5 w-full gap-3 sm:flex-row sm:items-center sm:justify-between mb-6">
      <div class="col-span-4">
        <span class="page-header">
          {{ piece.title }}
        </span>
        <h3 class="page-subheader">{{ piece.composer }}</h3>
      </div>
    </div>

    <!-- Instrumentation -->
    <div class="bg-white border border-slate-200 shadow-sm rounded-xl p-6 mb-4">
      <h1 class="text-lg font-medium">Instrumentation</h1>
      <span class="text-md font-light">{{ piece.instrumentation }}</span>
    </div>

    <!-- Parts -->
    <div class="bg-white border border-slate-200 shadow-sm rounded-xl p-6 mb-4">
      <h1 class="text-lg font-medium">Parts</h1>

      <!-- Upload Form -->
        <form method="post" class="space-y-4 items-center">
            {% csrf_token %}
            <div class="relative z-10">
            <input
                type="file"
                data-piece-id="{{ piece_id }}"
                class="filepond w-full"
                multiple
            >
            </div>
        </form>
      
      <!-- Parts Partial -->
      <div id="parts"
        class="relative z-0"
        hx-get="{% url 'get_parts' piece.id %}"
        hx-trigger="load, refreshParts from:body"
        hx-swap="innerHTML">
      </div>
    </div>
  </div>
</div>
{% endblock %}
